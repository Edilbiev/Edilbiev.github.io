(this.webpackJsonpchechnyatoday=this.webpackJsonpchechnyatoday||[]).push([[0],{139:function(e,t,a){e.exports={button:"dropdownMenu_button__LO0GI"}},140:function(e,t,a){e.exports=a.p+"static/media/more_horiz-24px.d644ed95.svg"},141:function(e,t,a){e.exports=a.p+"static/media/data_usage-24px.4d007d82.svg"},143:function(e,t,a){e.exports={button:"mainEventsButton_button__7n6UQ"}},144:function(e,t,a){e.exports=a.p+"static/media/burger.9212ce7d.svg"},145:function(e,t,a){e.exports=a.p+"static/media/visibility-black-18dp.dcb5e951.svg"},146:function(e,t,a){e.exports=a.p+"static/media/visibility_off-black-18dp.29e98e99.svg"},147:function(e,t,a){e.exports={button:"CreatorButton_button__EZd5Z"}},154:function(e,t,a){e.exports=a(280)},159:function(e,t,a){},24:function(e,t,a){e.exports={buttonsGroup:"PostsSliceButtons_buttonsGroup__1bZnX",text:"PostsSliceButtons_text__2sLvA",button:"PostsSliceButtons_button__2DsDI",endButton:"PostsSliceButtons_endButton__3tMoZ",activeButton:"PostsSliceButtons_activeButton__1cI88"}},280:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),o=a.n(c),s=(a(159),a(9)),l=a(2),i=a(3),u=a(10),d=a.n(u),m=a(64),p=a.n(m),b=a(138),f=a.n(b);var v=function(e){var t=e.opened,a=e.handleClick,n=e.children;return!1===t?null:r.a.createElement(f.a,{onOutsideClick:a},r.a.createElement("div",{className:p.a.dropdown},n))};var O=function(e){var t=e.children,a=e.action;return r.a.createElement("div",{className:p.a.dropdownItem,onClick:a},t)},E=a(139),j=a.n(E),_=a(140),h=a.n(_);var g=function(e){var t=e.handlePopup,a=e.handleEditor,c=Object(n.useState)(!1),o=Object(i.a)(c,2),s=o[0],l=o[1],u=function(e){e.stopPropagation(),l(!s)};return r.a.createElement("div",null,r.a.createElement("button",{className:j.a.button,onClick:u},r.a.createElement("img",{src:h.a,alt:"icon"})),r.a.createElement(v,{opened:s,handleClick:u},r.a.createElement(O,{action:function(e){e.stopPropagation(),a(),l(!s)}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(O,{action:function(e){e.stopPropagation(),t(),l(!s)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},y=a(14),N=a(8),w=a(1);function C(e,t,a){return fetch("https://api.intocode.ru:5005/api"+e,{method:t,headers:{"x-auth-token":localStorage.getItem("token"),Accept:"application/json","Content-Type":"application/json"},withCredentials:!0,body:JSON.stringify(a)}).then((function(e){return e.json()}))}function k(e,t){return C(e,"post",t)}function S(e,t){return C(e,"delete",t)}function x(e,t){return C(e,"PATCH",t)}var D={loading:!1,items:[],creating:!1,editing:!1,deleting:!1,reversed:null===localStorage.getItem("reversed")?{}:JSON.parse(localStorage.getItem("reversed")),postsCount:null===localStorage.getItem("postsCount")?{}:JSON.parse(localStorage.getItem("postsCount")),mainEventsBarOpened:null===localStorage.getItem("mainEventsBarOpened")?{}:JSON.parse(localStorage.getItem("mainEventsBarOpened"))};function P(){return function(e){e({type:"onlines/load/started"}),C("/onlines").then((function(t){e({type:"onlines/load/succeed",payload:t})})).catch((function(e){alert("\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445")}))}}function B(e){return function(e){var t=JSON.parse(localStorage.getItem("reversed"))||{};void 0!==t[e]?t[e]=!t[e]:t[e]=!0,localStorage.setItem("reversed",JSON.stringify(t))}(e),{type:"posts/order/reversed",payload:e}}function I(e,t){return function(e,t){var a=JSON.parse(localStorage.getItem("postsCount"))||{};a[e]=t,localStorage.setItem("postsCount",JSON.stringify(a))}(e,t),{type:"posts/count/set",payload:{id:e,count:t}}}function H(e){return function(e){var t=JSON.parse(localStorage.getItem("mainEventsBarOpened"))||{};void 0!==t[e]?t[e]=!t[e]:t[e]=!0,localStorage.setItem("mainEventsBarOpened",JSON.stringify(t))}(e),{type:"main/events/handled",payload:e}}var A=a(48),T=a.n(A),M=a(68),z=a.n(M),J=a(141),L=a.n(J),R=a(15),F=a.n(R);var K=function(e){var t,a=e.size;return r.a.createElement("img",{src:L.a,className:F()(z.a.loader,(t={},Object(N.a)(t,z.a.large,"large"===a),Object(N.a)(t,z.a.small,"small"===a),t)),alt:"loading"})};var Y=function(e){var t=e.isOpened,a=e.text,c=e.action,o=e.cancel,s=e.deleting;return Object(n.useEffect)((function(){t?document.body.style.overflow="hidden":document.body.style.removeProperty("overflow")}),[t]),t?r.a.createElement("div",{className:T.a.background,onClick:o},r.a.createElement("div",{className:T.a.popup},r.a.createElement("div",null,a),r.a.createElement("div",{className:T.a.buttons},r.a.createElement("div",null,r.a.createElement("button",{className:"cancel-button",onClick:o},"\u041e\u0442\u043c\u0435\u043d\u0430")),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("button",{className:"confirm-button",onClick:c,disabled:s},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),r.a.createElement("div",{className:T.a.loader},s&&r.a.createElement(K,{size:"small"})))))):null},Z=a(69),G=a.n(Z),V=a(33),W=a(65),Q=a.n(W),U=a(12),X=a(34),q=a.n(X);var $=function(e){var t=e.isOpened,a=e.online,c=e.cancel,o=Object(l.b)(),s=Object(l.c)((function(e){return e.onlines.editing})),u=Q()(a.introtext),m=u.contentBlocks,p=u.entityMap,b=U.ContentState.createFromBlockArray(m,p),f=U.EditorState.createWithContent(b),v=Object(n.useState)(a.title),O=Object(i.a)(v,2),E=O[0],j=O[1],_=Object(n.useState)(f),h=Object(i.a)(_,2),g=h[0],y=h[1],N=Object(n.useState)(!1),w=Object(i.a)(N,2),C=w[0],k=w[1];return Object(n.useEffect)((function(){t?document.body.style.overflow="hidden":document.body.style.removeProperty("overflow")}),[t]),!s&&C&&(c(),k(!1)),t?r.a.createElement("div",{className:"popup-background"},r.a.createElement("div",{className:G.a.onlineEditor},r.a.createElement("div",{className:G.a.time},d()(a.startedDate).format("HH:mm")),r.a.createElement("div",null,r.a.createElement("textarea",{className:"title",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",value:E,onChange:function(e){return j(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(V.Editor,{editorState:g,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043d\u0442\u0435\u043d\u0442",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:function(e){return y(e)}})),r.a.createElement("div",{className:G.a.buttons},r.a.createElement("div",null,r.a.createElement("button",{className:"cancel-button",onClick:c},"\u041e\u0442\u043c\u0435\u043d\u0430")),r.a.createElement("div",null,r.a.createElement("button",{className:"confirm-button",onClick:function(){k(!0),o(function(e,t,a){return function(n){n({type:"onlines/edit/started"}),x("/onlines/".concat(e),{title:t,introtext:a}).then((function(e){n({type:"onlines/edit/succeed",payload:e})}))}}(a._id,E,q()(Object(U.convertToRaw)(g.getCurrentContent()))))},disabled:s},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement("div",{className:"button-loader"},s&&r.a.createElement(K,{size:"small"})))))):null},ee=a(66),te=a.n(ee);var ae=function(e){var t=e.online,a=e.isAdmin,c=Object(l.b)(),o=Object(s.g)(),u=Object(l.c)((function(e){return e.onlines.deleting})),m=Object(n.useState)(!1),p=Object(i.a)(m,2),b=p[0],f=p[1],v=function(){return f(!b)},O=Object(n.useState)(!1),E=Object(i.a)(O,2),j=E[0],_=E[1];!u&&j&&(v(),_(!1));var h=Object(n.useState)(!1),y=Object(i.a)(h,2),N=y[0],w=y[1],C=function(){return w(!N)};return d.a.extend(te.a),r.a.createElement("div",null,r.a.createElement("div",{className:"online-form",onClick:function(){a?o.push("/admin/"+t._id):o.push("/"+t._id)}},r.a.createElement("div",{className:"time1"},d()(t.startedDate).calendar(null,{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f] HH:mm",lastDay:"[\u0412\u0447\u0435\u0440\u0430] HH:mm",lastWeek:"dddd HH:mm",sameElse:"DD/MM/YYYY"}),a?r.a.createElement(g,{handlePopup:v,handleEditor:C}):null),r.a.createElement("div",{className:"title"},t.title),r.a.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:t.introtext}})),r.a.createElement(Y,{isOpened:b,cancel:v,action:function(e){var a;e.stopPropagation(),_(!0),c((a=t._id,t.title,t.introtext,function(e){e({type:"onlines/delete/started"}),S("/onlines/".concat(a)).then((function(t){e({type:"onlines/delete/succeed",payload:a})}))}))},text:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435",deleting:u}),r.a.createElement($,{online:t,isOpened:N,cancel:C}))};var ne=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.onlines.items.sort((function(e,t){return new Date(t.startedDate)-new Date(e.startedDate)}))})),a=Object(l.c)((function(e){return e.onlines.loading}));return Object(n.useEffect)((function(){e(P())}),[e]),a?r.a.createElement("div",{className:"loader-large"},r.a.createElement(K,{size:"large"})):r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(ae,{online:e,key:e._id})})))},re=a(86),ce=a.n(re),oe=a(142);function se(){return(se=Object(oe.a)(ce.a.mark((function e(t){var a,n,r;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split(/\?.+/),e.next=3,fetch("https://graph.facebook.com/v8.0/instagram_oembed?url=".concat(a[0],"&access_token=1260168264328153|06JlTbK02xcTpl4flpOpCaZu9sc"));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r.html);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=function(e){switch(function(e){var t=document.createElement("a");switch(t.href=e,t.hostname){case"t.me":return"telegram";case"www.facebook.com":return"facebook";case"www.instagram.com":return"instagram";case"youtu.be":return"youtube";default:return}}(e)){case"telegram":return function(e){var t=document.createElement("a");t.href=e;var a=document.createElement("script");return a.async=!0,a.src="https://telegram.org/js/telegram-widget.js?11",a.setAttribute("data-telegram-post",t.pathname),a}(e);case"facebook":return function(e){var t=encodeURIComponent(e.split(/(\S+\d)/)[1]),a=document.createElement("iframe");return a.src="https://www.facebook.com/plugins/post.php?href="+t+"&show_text=true&width=552&appId=1260168264328153&height=292",a.width="100%",a.height="390",a.scrolling="no",a.frameBorder="0",a.allow="encrypted-media",a.setAttribute("allowTransparency","true"),a}(e);case"instagram":return function(e){return se.apply(this,arguments)}(e);case"youtube":return function(e){var t=document.createElement("a");t.href=e;var a=document.createElement("iframe");return a.src="https://www.youtube.com/embed/"+t.pathname.split(/%/)[0],a.allow="accelerometer",a.frameBorder="0",a.width="100%",a.height="315",a}(e);default:return e}};var ie=a(87),ue=a.n(ie),de={loading:!1,backLoading:!1,items:[],temp:[],creating:!1,deleting:!1,editing:!1};function me(e){return function(t){t({type:"posts/load/started",payload:e}),C("/onlines/".concat(e)).then((function(e){t({type:"posts/load/succeed",payload:e})})).catch((function(e){alert("\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445")}))}}var pe=a(41),be=a.n(pe),fe=a(49),ve=a.n(fe);var Oe=function(e){var t=e.defaultValue,a=e.onSwitchedOn,c=e.onSwitchedOff,o=Object(n.useState)(t),s=Object(i.a)(o,2),l=s[0],u=s[1];return Object(n.useEffect)((function(){u(t)}),[t]),r.a.createElement("div",{className:ve.a.switcher},r.a.createElement("div",{onClick:function(){l?c():a(),u(!l)},className:F()(ve.a.backgroundOff,Object(N.a)({},ve.a.backgroundOn,l))},r.a.createElement("div",{className:ve.a.round})))};var Ee=function(e){var t=e.item,a=e.isOpened,c=e.cancel,o=Object(l.b)(),s=Object(l.c)((function(e){return e.posts.editing})),u=Q()(t.content),m=u.contentBlocks,p=u.entityMap,b=U.ContentState.createFromBlockArray(m,p),f=U.EditorState.createWithContent(b),v=Object(n.useState)(t.title),O=Object(i.a)(v,2),E=O[0],j=O[1],_=Object(n.useState)(f),h=Object(i.a)(_,2),g=h[0],y=h[1];Object(n.useEffect)((function(){a?document.body.style.overflow="hidden":document.body.style.removeProperty("overflow")}),[a]);var w=Object(n.useState)(!1),C=Object(i.a)(w,2),k=C[0],S=C[1],D=function(){return S(!k)},P=Object(n.useState)(!1),B=Object(i.a)(P,2),I=B[0],H=B[1];return!s&&I&&(c(),H(!1)),a?r.a.createElement("div",{className:"popup-background"},r.a.createElement("div",{className:F()(be.a.postEditor,Object(N.a)({},be.a.importantPostEditor,k))},r.a.createElement("div",{className:be.a.time},d()(t.createdDate).format("HH:mm")),r.a.createElement("div",null,r.a.createElement("textarea",{className:"title",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",value:E,onChange:function(e){return j(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(V.Editor,{editorState:g,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043d\u0442\u0435\u043d\u0442",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:function(e){return y(e)}})),r.a.createElement("div",{className:be.a.handlers},r.a.createElement("div",null,r.a.createElement(Oe,{defaultValue:k,onSwitchedOff:D,onSwitchedOn:D})),r.a.createElement("div",{className:be.a.buttons},r.a.createElement("div",null,r.a.createElement("button",{className:"cancel-button",onClick:c},"\u041e\u0442\u043c\u0435\u043d\u0430")),r.a.createElement("div",null,r.a.createElement("button",{className:"confirm-button",onClick:function(){H(!0),o(function(e,t,a,n){return function(r){r({type:"post/edit/started"}),x("/post/".concat(e),{title:t,content:a,important:n}).then((function(e){r({type:"post/edit/succeed",payload:e})}))}}(t._id,E,q()(Object(U.convertToRaw)(g.getCurrentContent())),k))},disabled:s},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement("div",{className:"button-loader"},s&&r.a.createElement(K,{size:"small"}))))))):null};var je=function(e){var t=e.item,a=e.isAdmin,c=Object(l.b)(),o=Object(n.useRef)(null),s=Object(l.c)((function(e){return e.posts.deleting})),u=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){var t=e.content.split(/(https:\S+)/),a=document.createElement("div");return t.forEach((function(e){if(0===e.indexOf("https")){var t=le(e),n=document.createElement("script");n.async=!0,n.src="//www.instagram.com/embed.js",t instanceof Promise?t.then((function(e){a.innerHTML=e,a.append(n)})):a.append(le(e))}else a.insertAdjacentHTML("beforeend",e)})),c(a),function(){a.remove()}}),[e]),r}(t);Object(n.useEffect)((function(){null!==u&&o.current.append(u)}),[u]);var m=Object(n.useState)(!1),p=Object(i.a)(m,2),b=p[0],f=p[1],v=function(){return f(!b)},O=Object(n.useState)(!1),E=Object(i.a)(O,2),j=E[0],_=E[1],h=function(){return _(!j)},y=Object(n.useState)(!1),w=Object(i.a)(y,2),C=w[0],k=w[1];return d.a.extend(te.a),!s&&C&&(v(),k(!1)),r.a.createElement("div",{id:t._id,className:F()(ue.a.card,Object(N.a)({},ue.a.importantCard,t.important))},r.a.createElement("div",{className:"time1"},d()(t.createdDate).calendar(null,{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f] HH:mm",lastDay:"[\u0412\u0447\u0435\u0440\u0430] HH:mm",lastWeek:"dddd HH:mm",sameElse:"DD/MM/YYYY"}),a?r.a.createElement(g,{handlePopup:v,handleEditor:h}):null),r.a.createElement("div",{className:"title"},t.title),r.a.createElement("div",{className:"content",ref:o}),r.a.createElement(Y,{isOpened:b,cancel:v,action:function(e){var a;k(!0),e.stopPropagation(),c((a=t._id,function(e){e({type:"post/delete/started"}),S("/post/".concat(a)).then((function(t){e({type:"post/delete/succeed",payload:a})}))}))},text:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435",deleting:s}),r.a.createElement(Ee,{item:t,isOpened:j,cancel:h}))},_e=a(24),he=a.n(_e);var ge=function(){var e=Object(s.h)().id,t=Object(l.c)((function(t){var a=t.onlines;return a.postsCount.hasOwnProperty(e)?a.postsCount[e]:-1})),a=Object(l.b)(),n=function(t){a(I(e,t))};return r.a.createElement("div",{className:he.a.buttonsGroup},r.a.createElement("span",{className:he.a.text},"\u0412\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438"),r.a.createElement("button",{onClick:function(){return n(10)},className:F()(he.a.button,Object(N.a)({},he.a.activeButton,10===t))},"10"),r.a.createElement("button",{onClick:function(){return n(30)},className:F()(he.a.button,Object(N.a)({},he.a.activeButton,30===t))},"30"),r.a.createElement("button",{onClick:function(){return n(50)},className:F()(he.a.button,Object(N.a)({},he.a.activeButton,50===t))},"50"),r.a.createElement("button",{onClick:function(){return n(-1)},className:F()("".concat(he.a.button," ").concat(he.a.endButton),Object(N.a)({},he.a.activeButton,-1===t))},"\u0432\u0441\u0435"))},ye=a(70),Ne=a.n(ye),we=a(88),Ce=a.n(we);var ke=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.posts.temp}));return r.a.createElement("div",{className:Ce.a.backpostsLoader,onClick:function(){return e({type:"backposts/append/succeed"})}},r.a.createElement("div",{className:Ce.a.inner},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u043f\u043e\u0441\u0442\u044b (",t.length,")"))},Se=a(281),xe=a(89),De=a.n(xe),Pe=a(90),Be=a.n(Pe);var Ie=function(){var e=Object(l.b)(),t=Object(s.h)().id,a=Object(l.c)((function(e){return e.posts.temp})),n=Object(l.c)((function(e){var a=e.onlines;return!!a.reversed.hasOwnProperty(t)&&a.reversed[t]})),c=Object(l.c)((function(e){var a=e.onlines;return a.postsCount.hasOwnProperty(t)?a.postsCount[t]:-1})),o=Object(l.c)((function(e){var t=n?Object(y.a)(e.posts.items).sort((function(e,t){return new Date(e.createdDate)-new Date(t.createdDate)})):Object(y.a)(e.posts.items).sort((function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)}));return-1!==c?t.slice(0,c):t})),i=function(){e(B(t))};return r.a.createElement("div",{className:Ne.a.post},r.a.createElement("div",{className:Ne.a.handlers},r.a.createElement(ge,null),r.a.createElement(Oe,{defaultValue:n,onSwitchedOn:i,onSwitchedOff:i})),r.a.createElement(Se.a,{in:0!==a.length,timeout:300,classNames:"backposts-loader",unmountOnExit:!0},r.a.createElement(ke,null)),r.a.createElement("div",null,o.map((function(e){return e.separate?r.a.createElement("div",{className:Ne.a.newPostsBorder,key:e._id},r.a.createElement("img",{src:n?De.a:Be.a,alt:"icon"})," ",e.content," ",r.a.createElement("img",{src:n?De.a:Be.a,alt:"icon"})):r.a.createElement(je,{item:e,key:e._id})}))))},He=a(50),Ae=a.n(He);var Te=function(e){var t=e.item;return r.a.createElement("div",{className:Ae.a.mainEvent,onClick:function(){document.getElementById(t._id).scrollIntoView({block:"center",behavior:"smooth"})}},r.a.createElement("div",{className:Ae.a.time},r.a.createElement("div",{className:Ae.a.checkpoint}),d()(t.createdDate).format("HH:mm")),r.a.createElement("div",{className:Ae.a.text},t.title))},Me=a(91),ze=a.n(Me);var Je=function(e){e.isOpened;var t=Object(s.h)().id,a=Object(l.c)((function(e){var a=e.onlines;return!!a.reversed.hasOwnProperty(t)&&a.reversed[t]})),n=Object(l.c)((function(e){var a=e.onlines;return a.postsCount.hasOwnProperty(t)?a.postsCount[t]:-1})),c=Object(l.c)((function(e){var t=a?Object(y.a)(e.posts.items).sort((function(e,t){return new Date(e.createdDate)-new Date(t.createdDate)})):Object(y.a)(e.posts.items).sort((function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)}));return-1!==n?t.slice(0,n):t})).filter((function(e){return e.hasOwnProperty("title")&&""!==e.title}));return r.a.createElement("div",{className:ze.a.mainEvents},r.a.createElement("div",{className:ze.a.title},"\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u044b"),c.map((function(e){return r.a.createElement(Te,{item:e,key:e._id})})))},Le=a(67),Re=a.n(Le),Fe=a(143),Ke=a.n(Fe),Ye=a(144),Ze=a.n(Ye);var Ge=function(e){var t=e.handleMainEventsBar;return r.a.createElement("div",null,r.a.createElement("button",{onClick:t,className:Ke.a.button},r.a.createElement("img",{src:Ze.a,alt:"Main events"})))};var Ve=function(){var e=Object(s.h)().id,t=Object(l.b)();Object(n.useEffect)((function(){t(me(e))}),[t,e]),Object(n.useEffect)((function(){var a=setInterval((function(){t(function(e){return function(t,a){var n=a().posts.items;C("/onlines/".concat(e)).then((function(e){var a,r=null===(a=n[n.length-1])||void 0===a?void 0:a.createdDate,c=e.filter((function(e){return new Date(e.createdDate)>new Date(r)}));t({type:"backposts/load/succeed",payload:c})}))}}(e))}),5e3);return function(){return clearInterval(a)}}),[t,e]);var a=Object(l.c)((function(t){var a=t.onlines;return!!a.mainEventsBarOpened.hasOwnProperty(e)&&a.mainEventsBarOpened[e]}));return Object(l.c)((function(e){return e.posts.loading}))?r.a.createElement("div",{className:"loader-large"},r.a.createElement(K,{size:"large"})):r.a.createElement("div",{className:Re.a.postsPage},r.a.createElement("div",{className:Re.a.posts},r.a.createElement(Ie,null)),r.a.createElement(Ge,{handleMainEventsBar:function(){t(H(e))}}),r.a.createElement(Se.a,{in:a,timeout:300,classNames:"transition",unmountOnExit:!0},r.a.createElement(Je,{isOpened:1})))},We={loading:!1,success:!1,error:!1,isAdmin:!1,fetching:!1,authorized:!1,jwt:localStorage.getItem("token")};var Qe=a(30),Ue=a.n(Qe),Xe=a(145),qe=a.n(Xe),$e=a(146),et=a.n($e);var tt=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth.loading})),a=Object(l.c)((function(e){return e.auth.authorized})),c=Object(n.useState)(!1),o=Object(i.a)(c,2),u=o[0],d=o[1],m=Object(n.useState)(!1),p=Object(i.a)(m,2),b=p[0],f=p[1],v=Object(n.useState)(""),O=Object(i.a)(v,2),E=O[0],j=O[1],_=Object(n.useState)(""),h=Object(i.a)(_,2),g=h[0],y=h[1],N=Object(n.useState)(!1),w=Object(i.a)(N,2),C=w[0],S=w[1],x=Object(n.useRef)(null),D=function(){d(!1),e(function(e,t){return function(a){a({type:"auth/process/started"}),k("/auth",{login:e,password:t}).then((function(e){"success"===e.status?(e.hasOwnProperty("token")&&localStorage.setItem("token",e.token),a({type:"auth/process/succeed",payload:e})):a({type:"auth/process/failed",payload:e})}))}}(E,g)),f(!0)},P=function(e){13===e.keyCode&&D()},B=""===E||""===g;if(!t&&b){if(a)return r.a.createElement(s.a,{to:"/admin"});d(!0),f(!1)}return r.a.createElement("div",{className:Ue.a.auth},r.a.createElement("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",value:E,onChange:function(e){j(e.target.value)},className:Ue.a.input,onKeyDown:P}),r.a.createElement("div",{className:Ue.a.password},r.a.createElement("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",value:g,onChange:function(e){y(e.target.value)},className:Ue.a.input,onKeyDown:P,type:C?"":"password",ref:x}),""===g?null:r.a.createElement("button",{onClick:function(){x.current.focus(),S(!C)},className:Ue.a.visibility},r.a.createElement("img",{src:C?et.a:qe.a,alt:"visibility"}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:D,className:Ue.a.button,disabled:t||B},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("div",{className:Ue.a.loader},t&&b&&r.a.createElement(K,{size:"small"})),r.a.createElement("div",{className:Ue.a.error},u&&"\u043e\u0448\u0438\u0431\u043a\u0430"))};var at=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(tt,null))},nt=(a(136),a(92)),rt=a.n(nt),ct=a(147),ot=a.n(ct);var st=function(e){var t=e.handleClick,a=e.text;return r.a.createElement("div",null,r.a.createElement("button",{className:ot.a.button,onClick:t},a))};var lt=function(){var e=Object(s.i)("/admin/add"),t=Object(l.c)((function(e){return e.onlines.creating})),a=Object(l.b)(),c=Object(n.useState)(e),o=Object(i.a)(c,2),u=o[0],m=o[1],p=Object(n.useState)(""),b=Object(i.a)(p,2),f=b[0],v=b[1],O=Object(n.useState)(U.EditorState.createEmpty()),E=Object(i.a)(O,2),j=E[0],_=E[1],h=Object(n.useState)(!1),g=Object(i.a)(h,2),y=g[0],N=g[1],w=Object(n.useState)(!1),C=Object(i.a)(w,2),S=C[0],x=C[1],D=function(){x(!1),m(!u)},P=0===j.getCurrentContent().getPlainText().length;return!t&&y&&(v(""),_(U.EditorState.createEmpty()),N(!1)),u?r.a.createElement("div",{className:"online-form"},r.a.createElement("div",{className:rt.a.time},d()(new Date).format("HH:mm")),r.a.createElement("div",null,r.a.createElement("textarea",{className:"title",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",value:f,onChange:function(e){return v(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(V.Editor,{editorRef:function(e){return!S&&(null===e||void 0===e?void 0:e.focus())},editorState:j,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043d\u0442\u0435\u043d\u0442",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:function(e){return _(e)},onBlur:function(){return x(!0)}})),r.a.createElement("div",{className:rt.a.buttons},r.a.createElement("div",null,r.a.createElement("button",{className:"cancel-button",onClick:D},"\u041e\u0442\u043c\u0435\u043d\u0430")),r.a.createElement("div",null,r.a.createElement("button",{className:"confirm-button",onClick:function(){N(!0),a(function(e,t,a){return function(n){n({type:"online/create/started"}),k("/onlines",{title:e,introtext:t,photoId:a}).then((function(e){n({type:"online/create/succeed",payload:e})}))}}(f,q()(Object(U.convertToRaw)(j.getCurrentContent()))))},disabled:t||P},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement("div",{className:"button-loader"},t&&r.a.createElement(K,{size:"small"}))))):r.a.createElement(st,{handleClick:D,text:"\u041d\u043e\u0432\u0430\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u044f..."})};var it=function(e){var t=e.isAdmin,a=Object(l.b)();Object(n.useEffect)((function(){a(P())}),[a]);var c=Object(l.c)((function(e){return e.onlines.items.sort((function(e,t){return new Date(t.startedDate)-new Date(e.startedDate)}))}));return Object(l.c)((function(e){return e.onlines.loading}))?r.a.createElement("div",{className:"loader-large"},r.a.createElement(K,{size:"large"})):r.a.createElement("div",null,r.a.createElement(lt,null),r.a.createElement("div",null,c.map((function(e){return r.a.createElement(ae,{online:e,key:e._id,isAdmin:t})}))))};var ut=function(e){var t=e.isAdmin;return r.a.createElement(r.a.Fragment,null,r.a.createElement(it,{isAdmin:t}))},dt=a(39),mt=a.n(dt);var pt=function(){var e=Object(s.h)().id,t=Object(l.b)(),a=Object(l.c)((function(e){return e.posts.creating})),c=Object(n.useState)(!1),o=Object(i.a)(c,2),u=o[0],m=o[1],p=Object(n.useState)(""),b=Object(i.a)(p,2),f=b[0],v=b[1],O=Object(n.useState)(U.EditorState.createEmpty()),E=Object(i.a)(O,2),j=E[0],_=E[1],h=Object(n.useState)(!1),g=Object(i.a)(h,2),y=g[0],w=g[1],C=Object(n.useRef)(null),S=Object(n.useState)(!1),x=Object(i.a)(S,2),D=x[0],P=x[1],B=function(){return P(!D)},I=Object(n.useState)(!1),H=Object(i.a)(I,2),A=H[0],T=H[1],M=function(){T(!1),m(!u)};return!a&&y&&(v(""),_(""),P(!1),w(!1)),u?r.a.createElement("div",{className:F()(mt.a.postCreator,Object(N.a)({},mt.a.importantPostCreator,D))},r.a.createElement("div",{className:mt.a.time},d()(new Date).format("HH:mm")),r.a.createElement("div",null,r.a.createElement("textarea",{ref:C,className:"title",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",value:f,onChange:function(e){return v(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(V.Editor,{editorRef:function(e){return!A&&(null===e||void 0===e?void 0:e.focus())},editorState:j,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043d\u0442\u0435\u043d\u0442",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:function(e){return _(e)},onBlur:function(){return T(!0)}})),r.a.createElement("div",{className:mt.a.handlers},r.a.createElement("div",{className:mt.a.importance},r.a.createElement(Oe,{defaultValue:D,onSwitchedOff:B,onSwitchedOn:B})),r.a.createElement("div",{className:mt.a.buttons},r.a.createElement("div",null,r.a.createElement("button",{className:"cancel-button",onClick:M},"\u041e\u0442\u043c\u0435\u043d\u0430")),r.a.createElement("div",null,r.a.createElement("button",{className:"confirm-button",onClick:function(){w(!0),t(function(e,t,a,n){return function(r){r({type:"post/create/started"}),k("/post/".concat(e),{title:t,content:a,important:n}).then((function(e){r({type:"post/create/succeed",payload:e})}))}}(e,f,q()(Object(U.convertToRaw)(j.getCurrentContent())),D))},disabled:a},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement("div",{className:"button-loader"},a&&r.a.createElement(K,{size:"small"})))))):r.a.createElement(st,{handleClick:M,text:"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u0441\u0442..."})};var bt=function(e){var t=e.isAdmin,a=Object(s.h)().id,c=Object(l.b)();Object(n.useEffect)((function(){c(me(a))}),[c,a]);var o=Object(l.c)((function(e){return e.posts.items.sort((function(e,t){return new Date(t.createdDate)-new Date(e.createdDate)}))}));return Object(l.c)((function(e){return e.posts.loading}))?r.a.createElement("div",{className:"loader-large"},r.a.createElement(K,{size:"large"})):r.a.createElement("div",null,r.a.createElement(pt,null),r.a.createElement("div",null,o.map((function(e){return r.a.createElement(je,{item:e,isAdmin:t,key:e._id})}))))};function ft(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!0),o=Object(i.a)(c,2),s=o[0],l=o[1];return Object(n.useEffect)((function(){var e,t;(e="/autologin",C(e,"get",t)).then((function(e){"success"===e.status&&r(!0),l(!1)}))}),[r,l]),Object(n.useMemo)((function(){return[a,s]}),[a,s])}var vt=function(e){var t=e.path,a=ft(),n=Object(i.a)(a,2),c=n[0];return n[1]?null:c?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{exact:!0,path:t},r.a.createElement(ut,{isAdmin:c})),r.a.createElement(s.b,{exact:!0,path:"".concat(t,"/:id")},r.a.createElement(bt,{isAdmin:c}))):r.a.createElement(s.a,{to:"/auth"})};var Ot=function(){return r.a.createElement("div",null,r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(ne,null)),r.a.createElement(s.b,{path:"/auth"},r.a.createElement(at,null)),r.a.createElement(vt,{path:"/admin"}),r.a.createElement(s.b,{path:"/:id"},r.a.createElement(Ve,null))))},Et=a(19),jt=a(148),_t=a.n(jt);var ht,gt=function(){return d.a.extend(_t.a),d.a.updateLocale("en",{weekdays:["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"]}),r.a.createElement("div",{className:"app"},r.a.createElement(Et.a,null,r.a.createElement(Ot,null)))},yt=a(40),Nt=a(149),wt=a(151);Object(wt.a)({diff:!0,collapsed:!0});ht=Object(yt.a)(Nt.a);var Ct=Object(yt.c)({onlines:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posts/order/reversed":var a=void 0!==e.reversed[t.payload]&&e.reversed[t.payload];return Object(w.a)(Object(w.a)({},e),{},{reversed:Object(w.a)(Object(w.a)({},e.reversed),{},Object(N.a)({},t.payload,!a))});case"posts/count/set":return Object(w.a)(Object(w.a)({},e),{},{postsCount:Object(w.a)(Object(w.a)({},e.postsCount),{},Object(N.a)({},t.payload.id,t.payload.count))});case"main/events/handled":var n=void 0!==e.mainEventsBarOpened[t.payload]&&e.mainEventsBarOpened[t.payload];return Object(w.a)(Object(w.a)({},e),{},{mainEventsBarOpened:Object(w.a)(Object(w.a)({},e.mainEventsBarOpened),{},Object(N.a)({},t.payload,!n))});case"onlines/load/started":return Object(w.a)(Object(w.a)({},e),{},{loading:!0});case"onlines/load/succeed":return Object(w.a)(Object(w.a)({},e),{},{items:t.payload,loading:!1});case"online/create/started":return Object(w.a)(Object(w.a)({},e),{},{creating:!0});case"online/create/succeed":return Object(w.a)(Object(w.a)({},e),{},{items:[t.payload].concat(Object(y.a)(e.items)),creating:!1});case"onlines/delete/started":return Object(w.a)(Object(w.a)({},e),{},{deleting:!0});case"onlines/delete/succeed":return Object(w.a)(Object(w.a)({},e),{},{items:e.items.filter((function(e){return e._id!==t.payload})),deleting:!1});case"onlines/edit/started":return Object(w.a)(Object(w.a)({},e),{},{editing:!0});case"onlines/edit/succeed":return Object(w.a)(Object(w.a)({},e),{},{items:e.items.map((function(e){return e._id===t.payload._id?t.payload:e})),editing:!1});default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posts/load/started":return Object(w.a)(Object(w.a)({},e),{},{items:[],loading:!0});case"posts/load/succeed":return Object(w.a)(Object(w.a)({},e),{},{items:t.payload,loading:!1});case"post/create/started":return Object(w.a)(Object(w.a)({},e),{},{creating:!0});case"post/create/succeed":return Object(w.a)(Object(w.a)({},e),{},{items:[t.payload].concat(Object(y.a)(e.items)),creating:!1});case"post/delete/started":return Object(w.a)(Object(w.a)({},e),{},{deleting:!0});case"post/delete/succeed":return Object(w.a)(Object(w.a)({},e),{},{items:e.items.filter((function(e){return e._id!==t.payload})),deleting:!1});case"post/edit/started":return Object(w.a)(Object(w.a)({},e),{},{editing:!0});case"post/edit/succeed":return Object(w.a)(Object(w.a)({},e),{},{items:e.items.map((function(e){return e._id===t.payload._id?t.payload:e})),editing:!1});case"backposts/load/started":return Object(w.a)(Object(w.a)({},e),{},{backLoading:!0});case"backposts/load/succeed":return Object(w.a)(Object(w.a)({},e),{},{temp:t.payload,backLoading:!1});case"backposts/append/succeed":var a=e.items[e.items.length-1].createdDate;return Object(w.a)(Object(w.a)({},e),{},{temp:[],items:[].concat(Object(y.a)(e.items.filter((function(e){return!e.separate}))),[{content:"\u041d\u043e\u0432\u044b\u0435 \u043f\u043e\u0441\u0442\u044b",separate:!0,_id:"separate1",createdDate:Date.parse(a)+500}],Object(y.a)(e.temp))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/process/started":return Object(w.a)(Object(w.a)({},e),{},{loading:!0});case"auth/process/succeed":return Object(w.a)(Object(w.a)({},e),{},{jwt:t.payload,loading:!1,authorized:!0});case"auth/process/failed":return Object(w.a)(Object(w.a)({},e),{},{error:t.payload.error,loading:!1});case"autologin/receive/started":return Object(w.a)(Object(w.a)({},e),{},{fetching:!0});case"autologin/receive/succeed":return Object(w.a)(Object(w.a)({},e),{},{fetching:!1,isAdmin:"success"===t.payload.status});default:return e}}}),kt=Object(yt.d)(Ct,ht);a(279);o.a.render(r.a.createElement(l.a,{store:kt},r.a.createElement(gt,null)),document.getElementById("root"))},30:function(e,t,a){e.exports={auth:"auth_auth__IFtRK",input:"auth_input__ON05b",loader:"auth_loader__3w7FJ",error:"auth_error__2Xva7",button:"auth_button__1f-BD",visibility:"auth_visibility__1TBKy",password:"auth_password__sDWxm"}},39:function(e,t,a){e.exports={postCreator:"postCreator_postCreator__32FZ6",importantPostCreator:"postCreator_importantPostCreator__1tC4P",time:"postCreator_time__1-lUP",handlers:"postCreator_handlers__3VYCd",buttons:"postCreator_buttons__2CH3b",importance:"postCreator_importance__1G9ba"}},41:function(e,t,a){e.exports={postEditor:"postEditor_postEditor__l--cL",importantPostEditor:"postEditor_importantPostEditor__3tpkv",time:"postEditor_time__2m1Pj",handlers:"postEditor_handlers__2ppc1",buttons:"postEditor_buttons__3UvAQ"}},48:function(e,t,a){e.exports={background:"popup_background__IfYZO",buttons:"popup_buttons__28bpo",popup:"popup_popup__VlIZv",loader:"popup_loader__1Qvfa"}},49:function(e,t,a){e.exports={switcher:"button_switcher__3xLCH",switcherDisabled:"button_switcherDisabled__12WaZ",backgroundOff:"button_backgroundOff__2WmDo",backgroundOn:"button_backgroundOn__3GKax",round:"button_round__2MCJw"}},50:function(e,t,a){e.exports={mainEvent:"mainEvent_mainEvent__3mryd",checkpoint:"mainEvent_checkpoint__2tZ63",text:"mainEvent_text__1bTXw",time:"mainEvent_time__-wPll"}},64:function(e,t,a){e.exports={dropdownItem:"dropdown_dropdownItem__1zTbg",dropdown:"dropdown_dropdown__2MQdq"}},67:function(e,t,a){e.exports={postsPage:"postsPage_postsPage__KG2DN",posts:"postsPage_posts__3avaI"}},68:function(e,t,a){e.exports={large:"loader_large__1BwFb",small:"loader_small__2VoRA",loader:"loader_loader__3_a-M",spin:"loader_spin__ZK37A"}},69:function(e,t,a){e.exports={onlineEditor:"onlineEditor_onlineEditor__3apFc",time:"onlineEditor_time__PvrOY",buttons:"onlineEditor_buttons__1fKwj"}},70:function(e,t,a){e.exports={handlers:"posts_handlers__37mXQ",post:"posts_post__qZoDJ",buttons:"posts_buttons__1RTHx",newPostsBorder:"posts_newPostsBorder__3jfl7"}},87:function(e,t,a){e.exports={card:"post_card__EOpWs",importantCard:"post_importantCard__2pKST"}},88:function(e,t,a){e.exports={backpostsLoader:"backpostsLoader_backpostsLoader__37r16",inner:"backpostsLoader_inner__2trTK"}},89:function(e,t,a){e.exports=a.p+"static/media/arrow_downward-24px.28818c19.svg"},90:function(e,t,a){e.exports=a.p+"static/media/arrow_upward-24px.84e5e9b6.svg"},91:function(e,t,a){e.exports={mainEvents:"mainEvents_mainEvents__223-Y",title:"mainEvents_title__3AGU1"}},92:function(e,t,a){e.exports={time:"onlineCreator_time__3a6FK",buttons:"onlineCreator_buttons__1iCfq"}}},[[154,1,2]]]);
//# sourceMappingURL=main.1e4626bf.chunk.js.map