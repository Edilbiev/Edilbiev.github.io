<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="./index.css" />
    <title>Document</title>
  </head>
  <body style="margin: 0">
    <div class="goji-image-wrapper">
      <div class="goji-before-img">
        <img src="./assets/images/before-min.JPG" alt="before-image" />
      </div>
      <div class="goji-medium-img">
        <img src="./assets/images/medium-min.JPG" alt="medium-image" />
      </div>
      <div class="goji-premium-img">
        <img src="./assets/images/premium-min.JPG" alt="premium-image" />
      </div>
      <div class="goji-text-box">
        <div class="goji-shine-score-heading">
          Shine score
          <div class="goji-shine-score" id="goji-score"></div>
        </div>
        <div class="goji-text-box-inner">
          <div class="goji-heading">Masters of Polishing</div>
          Lorem ipsum dolor sit amet, consectetur <br />
          adipiscing elit. At tristique faucibus dui urna <br />
          mattis. Pharetra
        </div>
        <a class="goji-link" id="goji-link" href="http://localhost:8080">
          Click here to get your carâ€™s ShineScore!
        </a>
      </div>
      <div class="goji-input-wrapper">
        <div>
          <input
            type="range"
            min="1"
            max="200"
            value="1"
            class="goji-input"
            id="goji-bar"
          />
        </div>
      </div>
    </div>
  </body>

  <script>
    const slider = document.getElementById("goji-bar");
    const score = document.getElementById("goji-score");
    const anchor = document.getElementById("goji-link");
    const url = new URL("https://localhost:8080");
    url.searchParams.append("goBackUrl", window.location.href);

    anchor.href = url;
    score.innerHTML = 1;

    const root = document.documentElement;

    slider.oninput = function () {
      const value = ((this.value - this.min) / (this.max - this.min)) * 100;
      this.style.background =
        "linear-gradient(to right, #DADCDE 0%, #004077 " +
        value +
        "%, #97999b " +
        value +
        "%,  #97999b 100%)";

      if (this.value < 100) {
        score.innerHTML = 1;
        root.style.setProperty("--goji-before-opacity", 1);
        root.style.setProperty("--goji-premium-opacity", 0);
        root.style.setProperty("--goji-medium-opacity", this.value / 100);
      } else if (this.value > 190) {
        score.innerHTML = 9;
      } else {
        score.innerHTML = 5;
        root.style.setProperty("--goji-before-opacity", 0);
        root.style.setProperty("--goji-medium-opacity", 2 - this.value / 100);
        root.style.setProperty("--goji-premium-opacity", 1);
      }
      if (this.value > 10) {
        root.style.setProperty("--goji-text-height", "0");
        root.style.setProperty("--goji-text-mb", "0");
        root.style.setProperty("--goji-text-opacity", "0");
      } else {
        root.style.setProperty("--goji-text-height", "103px");
        root.style.setProperty("--goji-text-mb", "33px");
        root.style.setProperty("--goji-text-opacity", "1");
      }
    };
  </script>
</html>
