(this.webpackJsonptakeoffstaff=this.webpackJsonptakeoffstaff||[]).push([[0],{132:function(e,t,a){e.exports=a(162)},162:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),o=a.n(r),l=a(88),i=a(15),u=a(216),s=a(200),m=a(48),d=a(47),p=a(8),h={contacts:[],loading:!1,adding:!1,deleting:!1,editing:!1};var b={authProcessing:!1,isAdmin:null!==localStorage.getItem("token")&&"qwertyuioasdfghjk23456789i"===JSON.parse(localStorage.getItem("token")),error:!1,contactSearchString:""};var g=a(117),f=a(110),E=Object(m.c)({contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"contacts/load/started":return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case"contacts/load/succeed":return Object(p.a)(Object(p.a)({},e),{},{contacts:t.payload,loading:!1});case"contact/add/started":return Object(p.a)(Object(p.a)({},e),{},{adding:!0});case"contact/add/succeed":return Object(p.a)(Object(p.a)({},e),{},{contacts:[].concat(Object(d.a)(e.contacts),[t.payload]),loading:!1});case"contact/delete/started":return Object(p.a)(Object(p.a)({},e),{},{deleting:!0});case"contact/delete/succeed":return Object(p.a)(Object(p.a)({},e),{},{contacts:e.contacts.filter((function(e){return e.id!==t.payload})),contactsDeleting:!1});case"contact/edit/started":return Object(p.a)(Object(p.a)({},e),{},{editing:!0});case"contact/edit/succeed":return Object(p.a)(Object(p.a)({},e),{},{contacts:e.contacts.map((function(e){return e.id===t.payload.id?t.payload:e})),contactsEditing:!1});default:return e}},application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"contacts/search/set":return Object(p.a)(Object(p.a)({},e),{},{contactSearchString:t.payload});case"auth/process/started":return Object(p.a)(Object(p.a)({},e),{},{authProcessing:!0});case"auth/process/succeed":return Object(p.a)(Object(p.a)({},e),{},{isAdmin:!0,authProcessing:!1});case"auth/process/failed":return Object(p.a)(Object(p.a)({},e),{},{error:!0,authProcessing:!1});case"error/reset/succeed":return Object(p.a)(Object(p.a)({},e),{},{error:!1});default:return e}}}),O=Object(m.d)(E,Object(m.a)(g.a,f.a)),v=a(86),j=a.n(v)()({spacing:10,palette:{primary:{main:"#643865"}}}),y=a(13),C=a(24),k=a(217),w=a(203),S=a(22),I=a.n(S),x=I()((function(e){return{auth:{width:440,margin:"calc(50vh - 90px) auto","& .MuiTextField-root":{width:"100%",marginBottom:e.spacing(2)}},button:{width:"100%"}}}));function N(e,t,a){return fetch("http://localhost:3001"+e,{method:t,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()}))}function F(e,t){return N(e,"GET",t)}function T(e,t,a){return function(n){var c,r;n({type:"contact/add/started"}),(c="/contacts",r={name:e,phone:t,email:a},N(c,"POST",r)).then((function(e){n({type:"contact/add/succeed",payload:e})}))}}function A(e){return function(t){var a,n;t({type:"contact/delete/started"}),(a="/contacts/".concat(e),N(a,"DELETE",n)).then((function(a){t({type:"contact/delete/succeed",payload:e})}))}}function D(e,t,a,n){return function(c){var r,o;c({type:"contact/edit/started"}),(r="/contacts/".concat(e),o={name:t,phone:a,email:n},N(r,"PATCH",o)).then((function(e){c({type:"contact/edit/succeed",payload:e})}))}}var L=a(220),P=a(218);var B=function(){var e=x(),t=Object(i.b)(),a=Object(i.c)((function(e){return e.application.error})),r=function(){return t({type:"error/reset/succeed"})},o=Object(n.useState)(""),l=Object(C.a)(o,2),u=l[0],s=l[1],m=Object(n.useState)(""),d=Object(C.a)(m,2),p=d[0],h=d[1],b=""===u||""===p,g=function(){return t(function(e,t){return function(a){a({type:"auth/process/started"}),F("/users/1").then((function(n){e===n.login&&t===n.password?(localStorage.setItem("token",JSON.stringify(n.token)),a({type:"auth/process/succeed"})):a({type:"auth/process/failed"})}))}}(u,p))},f=function(e){13===e.keyCode&&(b||g())};return c.a.createElement("div",{className:e.auth},c.a.createElement("div",null,c.a.createElement(k.a,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",value:u,onChange:function(e){s(e.target.value)},variant:"outlined",onKeyDown:f})),c.a.createElement("div",null,c.a.createElement(k.a,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",value:p,onChange:function(e){h(e.target.value)},variant:"outlined",onKeyDown:f,type:"password"})),c.a.createElement("div",null,c.a.createElement(w.a,{className:e.button,color:"primary",variant:"outlined",disabled:b,onClick:g},"\u0412\u043e\u0439\u0442\u0438")),c.a.createElement(L.a,{open:a,autoHideDuration:6e3,onClose:r},c.a.createElement(P.a,{severity:"error",elevation:"5",variant:"filled",onClose:r},"\u041f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")))},J=a(167),R=a(210),G=a(211),H=a(223),K=a(212),M=a(114),q=a.n(M),z=a(204),W=a(118),Q=a(209),U=a(221),V=a(206),X=a(205),Y=a(207);var Z=function(e){var t=e.isOpened,a=e.handleClose,n=e.handleDelete;return c.a.createElement(U.a,{open:t,onClose:a},c.a.createElement(X.a,null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c?"),c.a.createElement(V.a,null,c.a.createElement(Y.a,null,c.a.createElement(w.a,{onClick:n},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),c.a.createElement(w.a,{onClick:a},"\u041e\u0442\u043c\u0435\u043d\u0430"))))},$=a(33),_=I()((function(e){return{contactForm:{padding:e.spacing(2)}}})),ee=a(208);var te=function(e){var t=e.contact,a=e.isOpened,r=e.handleClose,o=_(),l=Object(i.b)(),u=Object(n.useState)({name:t.name,phone:t.phone,email:t.email}),s=Object(C.a)(u,2),m=s[0],d=s[1],h=function(e){return d(Object(p.a)(Object(p.a)({},m),{},Object($.a)({},e.target.name,e.target.value)))},b=""===m.name||""===m.phone||""===m.email;return c.a.createElement(c.a.Fragment,null,c.a.createElement(U.a,{onClose:r,open:a,classes:{paper:o.contactForm}},c.a.createElement(ee.a,{container:!0,direction:"column",spacing:2},c.a.createElement(ee.a,{item:!0},c.a.createElement(k.a,{name:"name",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",variant:"outlined",value:m.name,onChange:h})),c.a.createElement(ee.a,{item:!0},c.a.createElement(k.a,{name:"phone",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440",variant:"outlined",value:m.phone,onChange:h})),c.a.createElement(ee.a,{item:!0},c.a.createElement(k.a,{name:"email",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",variant:"outlined",value:m.email,onChange:h})),c.a.createElement(ee.a,{container:!0,direction:"column",alignItems:"center"},c.a.createElement(w.a,{onClick:function(){var e=m.name,a=m.phone,n=m.email;l(D(t.id,e,a,n)),r()},disabled:b},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),c.a.createElement(w.a,{onClick:r,color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430")))))};var ae=function(e){var t=e.contact,a=Object(i.b)(),r=Object(n.useState)(null),o=Object(C.a)(r,2),l=o[0],u=o[1],s=function(){u(null)},m=Object(n.useState)(!1),d=Object(C.a)(m,2),p=d[0],h=d[1],b=function(){h(!p),s()},g=Object(n.useState)(!1),f=Object(C.a)(g,2),E=f[0],O=f[1],v=function(){O(!E),s()};return c.a.createElement(c.a.Fragment,null,c.a.createElement(z.a,{edge:"end",onClick:function(e){u(e.currentTarget)}},c.a.createElement(q.a,null)),c.a.createElement(W.a,{open:Boolean(l),onClose:s,anchorEl:l},c.a.createElement(Q.a,{onClick:v},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),c.a.createElement(Q.a,{onClick:b},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),c.a.createElement(Z,{isOpened:p,handleClose:b,handleDelete:function(){a(A(t.id))}}),c.a.createElement(te,{contact:t,isOpened:E,handleClose:v}))},ne=I()((function(e){return{listItem:{marginBottom:e.spacing(1),"& .MuiListItemText-root":{flex:1}},phone:{textAlign:"center"},email:{textAlign:"right",paddingRight:5}}}));var ce=function(e){var t=e.contact,a=ne();return c.a.createElement(J.a,{className:a.listItem},c.a.createElement(R.a,null,c.a.createElement(H.a,null)),c.a.createElement(G.a,null,t.name),c.a.createElement(G.a,{className:a.phone},t.phone),c.a.createElement(G.a,{className:a.email},t.email),c.a.createElement(K.a,null,c.a.createElement(ae,{contact:t})))},re=a(202),oe=I()((function(e){return{contacts:{marginTop:e.spacing(2),width:900,margin:"auto"}}})),le=a(215),ie=a(58),ue=a(222),se=a(116),me=a.n(se),de=a(214),pe=a(18),he=I()((function(e){return{toolBar:{width:900,margin:"auto",display:"flex",justifyContent:"space-between"},title:{flexGrow:1,display:"none"},search:Object($.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(pe.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(pe.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"}}})),be=a(115),ge=a.n(be),fe=I()((function(e){return{contactForm:{padding:e.spacing(2)},button:{position:"absolute",zIndex:1,top:20,left:170,right:0}}})),Ee=a(213);var Oe=function(){var e=fe(),t=Object(i.b)(),a=Object(n.useState)({name:"",phone:"",email:""}),r=Object(C.a)(a,2),o=r[0],l=r[1],u=function(e){return l(Object(p.a)(Object(p.a)({},o),{},Object($.a)({},e.target.name,e.target.value)))},s=Object(n.useState)(!1),m=Object(C.a)(s,2),d=m[0],h=m[1],b=function(){return h(!d)},g=""===o.name||""===o.phone||""===o.email;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ee.a,{onClick:b,className:e.button,color:"secondary"},c.a.createElement(ge.a,null)),c.a.createElement(U.a,{onClose:b,open:d,classes:{paper:e.contactForm}},c.a.createElement(ee.a,{container:!0,direction:"column",spacing:2},c.a.createElement(ee.a,{item:!0},c.a.createElement(k.a,{name:"name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",variant:"outlined",value:o.name,onChange:u})),c.a.createElement(ee.a,{item:!0},c.a.createElement(k.a,{name:"phone",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440",variant:"outlined",value:o.phone,onChange:u})),c.a.createElement(ee.a,{item:!0},c.a.createElement(k.a,{name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",variant:"outlined",value:o.email,onChange:u})),c.a.createElement(ee.a,{container:!0,direction:"column",alignItems:"center"},c.a.createElement(w.a,{onClick:function(){var e=o.name,a=o.mail,n=o.phone;t(T(e,a,n)),b()},disabled:g},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),c.a.createElement(w.a,{onClick:b,color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430")))))};var ve=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.application.contactSearchString})),a=he();return c.a.createElement("div",null,c.a.createElement(de.a,{position:"static"},c.a.createElement(le.a,{className:a.toolBar},c.a.createElement("div",null,c.a.createElement(ie.a,{variant:"h4",noWrap:!0},"Contacts"),c.a.createElement(Oe,null)),c.a.createElement("div",{className:a.search},c.a.createElement("div",{className:a.searchIcon},c.a.createElement(me.a,null)),c.a.createElement(ue.a,{value:t,onChange:function(t){return e({type:"contacts/search/set",payload:t.target.value})},placeholder:"Search\u2026",classes:{root:a.inputRoot,input:a.inputInput},inputProps:{"aria-label":"search"}})))))};var je=function(){var e=Object(i.b)(),t=oe();Object(n.useEffect)((function(){e((function(e){e({type:"contacts/load/started"}),F("/contacts").then((function(t){e({type:"contacts/load/succeed",payload:t})}))}))}),[e]),Object(i.c)((function(e){return e.application.isAdmin}));var a=Object(i.c)((function(e){var t=e.application.contactSearchString;return e.contacts.contacts.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(ve,null),c.a.createElement("div",{className:t.contacts},c.a.createElement(re.a,null,a.map((function(e){return c.a.createElement(ce,{contact:e,key:e.id})})))))};var ye=function(){var e=Object(i.c)((function(e){return e.application.isAdmin}));return console.log(e),c.a.createElement(c.a.Fragment,null,c.a.createElement(y.b,{path:"/"},e?c.a.createElement(y.a,{to:"/contacts"}):c.a.createElement(B,null)),c.a.createElement(y.b,{path:"/contacts"},e?c.a.createElement(je,null):c.a.createElement(y.a,{to:"/"})))};o.a.render(c.a.createElement(l.a,null,c.a.createElement(i.a,{store:O},c.a.createElement(s.a,{theme:j},c.a.createElement(u.a,null),c.a.createElement(ye,null)))),document.getElementById("root"))}},[[132,1,2]]]);