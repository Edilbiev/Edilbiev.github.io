{"version":3,"sources":["assets/shopping-cart.svg","components/BasketButton.js","components/Header.js","redux/reducer.js","utils/products.js","redux/index.js","components/AdditionButton.js","components/DeletionButton.js","components/Product.js","redux/actions.js","components/Products.js","components/Basket.js","components/Main.js","components/App.js","api/api.js","utils/configure.js","index.js"],"names":["BasketButton","history","useHistory","basket","useSelector","state","onClick","push","src","cartIcon","alt","length","className","Header","initialState","products","id","name","price","image","localStorage","getItem","JSON","parse","store","createStore","action","type","payload","subscribe","getState","setItem","stringify","AdditionButton","isProductInBasket","handleClick","disabled","DeletionButton","Product","item","dispatch","useDispatch","isLocationBasket","location","pathname","find","basketItem","filter","product","Products","map","Basket","Main","exact","path","App","useEffect","interval","setInterval","fetch","method","headers","body","then","res","json","status","console","log","catch","err","error","sendBasket","clearInterval","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.605a09f2.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/shopping-cart.6d67ff7c.svg\";","import React from \"react\";\nimport cartIcon from \"../assets/shopping-cart.svg\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\n\nfunction BasketButton() {\n  const history = useHistory();\n  const handleClick = () => history.push(\"/basket\");\n\n  const basket = useSelector((state) => state.basket);\n\n  return (\n    <button onClick={handleClick}>\n      <img src={cartIcon} alt=\"cart\" />\n      {basket.length ? (\n        <div className=\"basket-counter\">{basket.length}</div>\n      ) : null}\n    </button>\n  );\n}\n\nexport default BasketButton;\n","import React from \"react\";\nimport BasketButton from \"./BasketButton\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction Header() {\n  const history = useHistory();\n  const handleClick = () => history.push(\"/\");\n\n  return (\n    <header className=\"header\">\n      <nav className=\"nav\">\n        <button className=\"home-button\" onClick={handleClick}>\n          Shop\n        </button>\n        <BasketButton />\n      </nav>\n    </header>\n  );\n}\n\nexport default Header;\n","import { products } from \"../utils/products\";\n\nconst basket =\n  localStorage.getItem(\"basket\") === null\n    ? []\n    : JSON.parse(localStorage.getItem(\"basket\"));\n\nconst initialState = {\n  products,\n  basket,\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case \"add\":\n      return {\n        ...state,\n        basket: [...state.basket, action.payload],\n      };\n\n    case \"delete\":\n      return {\n        ...state,\n        basket: action.payload,\n      };\n\n    default:\n      return state;\n  }\n}\n","export const products = [\n  {\n    id: 1,\n    name: \"MacBook\",\n    price: 100000,\n    image: \"http://intocode.ru/d/react-project-1/images/1.jpg\",\n  },\n  {\n    id: 2,\n    name: \"Galaxy\",\n    price: 35999,\n    image: \"http://intocode.ru/d/react-project-1/images/2.jpg\",\n  },\n  {\n    id: 3,\n    name: \"Скутер\",\n    price: 65500,\n    image: \"http://intocode.ru/d/react-project-1/images/3.jpg\",\n  },\n  {\n    id: 4,\n    name: \"Монитор Samsung\",\n    price: 12000,\n    image: \"http://intocode.ru/d/react-project-1/images/4.jpg\",\n  },\n  {\n    id: 5,\n    name: \"Респераторная маска\",\n    price: 500,\n    image: \"http://intocode.ru/d/react-project-1/images/5.jpg\",\n  },\n  {\n    id: 6,\n    name: \"Стиральная машина\",\n    price: 100000,\n    image: \"http://intocode.ru/d/react-project-1/images/6.jpg\",\n  },\n  {\n    id: 7,\n    name: \"Белый холодильник\",\n    price: 43100,\n    image: \"http://intocode.ru/d/react-project-1/images/7.jpg\",\n  },\n  {\n    id: 8,\n    name: \"Колонка\",\n    price: 3000,\n    image: \"http://intocode.ru/d/react-project-1/images/8.jpg\",\n  },\n  {\n    id: 9,\n    name: \"Наушники\",\n    price: 1500,\n    image: \"http://intocode.ru/d/react-project-1/images/9.jpg\",\n  },\n];\n","import { createStore } from \"redux\";\nimport reducer from \"./reducer\";\n\nexport const store = createStore(reducer);\n\nstore.subscribe(() => {\n  const { basket } = store.getState();\n  localStorage.setItem(\"product\", JSON.stringify(basket));\n});\n","import React from \"react\";\n\nfunction AdditionButton({ isProductInBasket, handleClick }) {\n  return (\n    <button\n      className=\"button addition-button\"\n      onClick={handleClick}\n      disabled={isProductInBasket}\n    >\n      {isProductInBasket ? \"Товар в корзине\" : \"Добавить в корзину\"}\n    </button>\n  );\n}\n\nexport default AdditionButton;\n","import React from \"react\";\n\nfunction DeletionButton({ handleClick }) {\n  return (\n    <button className=\"button deletion-button\" onClick={handleClick}>\n      Удалить из корзины\n    </button>\n  );\n}\n\nexport default DeletionButton;\n","import { useDispatch, useSelector } from \"react-redux\";\nimport { addToBasket, deleteFromBasket } from \"../redux/actions\";\nimport { useHistory } from \"react-router-dom\";\nimport AdditionButton from \"./AdditionButton\";\nimport DeletionButton from \"./DeletionButton\";\n\nfunction Product({ item }) {\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const basket = useSelector((state) => state.basket);\n\n  const isLocationBasket = history.location.pathname === \"/basket\";\n\n  const isProductInBasket = basket.find(\n    (basketItem) => item.id === basketItem.id\n  );\n\n  const handleAdd = () => dispatch(addToBasket(item.id));\n\n  const handleDelete = () => dispatch(deleteFromBasket(item.id));\n\n  return (\n    <div className=\"product\">\n      <div className=\"product-image\">\n        <img src={item.image} alt=\"product\" />\n      </div>\n      <div className=\"product-info\">\n        <div className=\"product-name\">{item.name}</div>\n        <div className=\"product-price\">{item.price} ₽</div>\n        {!isLocationBasket ? (\n          <AdditionButton\n            handleClick={handleAdd}\n            isProductInBasket={isProductInBasket}\n          />\n        ) : (\n          <DeletionButton handleClick={handleDelete} />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Product;\n","import { store } from \"./index\";\n\nexport function addToBasket(id) {\n  const { products } = store.getState();\n  const productToAdd = products.find((product) => product.id === id);\n\n  return {\n    type: \"add\",\n    payload: productToAdd,\n  };\n}\n\nexport function deleteFromBasket(id) {\n  const { basket } = store.getState();\n  const filteredBasket = basket.filter((product) => product.id !== id);\n\n  return {\n    type: \"delete\",\n    payload: filteredBasket,\n  };\n}\n","import React from \"react\";\nimport Product from \"./Product\";\nimport { useSelector } from \"react-redux\";\n\nfunction Products() {\n  const products = useSelector((state) => state.products);\n\n  return products.map((item) => <Product item={item} key={item.id} />);\n}\n\nexport default Products;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport Product from \"./Product\";\n\nfunction Basket() {\n  const basket = useSelector((state) => state.basket);\n\n  if (basket.length === 0) {\n    return <div className=\"empty-basket\">В вашей корзине пока ничего нет</div>;\n  }\n\n  return basket.map((item) => <Product item={item} key={item.id} />);\n}\n\nexport default Basket;\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Products from \"./Products\";\nimport Basket from \"./Basket\";\n\nfunction Main() {\n  return (\n    <main className=\"main\">\n      <Switch>\n        <Route exact path=\"/\">\n          <Products />\n        </Route>\n        <Route path=\"/basket\">\n          <Basket />\n        </Route>\n      </Switch>\n    </main>\n  );\n}\n\nexport default Main;\n","import Header from \"./Header\";\nimport Main from \"./Main\";\nimport { useEffect } from \"react\";\nimport { sendBasket } from \"../api/api\";\nimport { useSelector } from \"react-redux\";\nimport { SYNC_INTERVAL } from \"../utils/configure\";\n\nfunction App() {\n  const basket = useSelector((state) => state.basket);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      sendBasket(basket);\n    }, SYNC_INTERVAL);\n\n    return () => clearInterval(interval);\n  }, [basket]);\n\n  return (\n    <div className=\"App\">\n      <Header />\n      <Main />\n    </div>\n  );\n}\n\nexport default App;\n","export function sendBasket(basket) {\n  fetch(\"http://localhost:3000\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n\n    body: JSON.stringify({ basket }),\n  })\n    .then((res) => res.json())\n    .then((json) => {\n      if (json.status === 200) {\n        console.log(\"basket information sent successful\");\n      } else {\n        console.log(\"basket information sending failed\");\n      }\n    })\n    .catch((err) => console.error(err));\n}\n","export const SYNC_INTERVAL = 5000;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./redux\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}