(this["webpackJsonptest-task2"]=this["webpackJsonptest-task2"]||[]).push([[0],{29:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),r=c.n(a),i=c(13),s=c.n(i),o=(c(29),c.p+"static/media/shopping-cart.6d67ff7c.svg"),d=c(3),u=c(4);var j=function(){var e=Object(d.f)(),t=Object(u.c)((function(e){return e.basket}));return Object(n.jsxs)("button",{onClick:function(){return e.push("/basket")},children:[Object(n.jsx)("img",{src:o,alt:"cart"}),t.length?Object(n.jsx)("div",{className:"basket-counter",children:t.length}):null]})};var b=function(){var e=Object(d.f)();return Object(n.jsx)("header",{className:"header",children:Object(n.jsxs)("nav",{className:"nav",children:[Object(n.jsx)("button",{className:"home-button",onClick:function(){return e.push("/")},children:"Shop"}),Object(n.jsx)(j,{})]})})},l=[{id:1,name:"MacBook",price:1e5,image:"http://intocode.ru/d/react-project-1/images/1.jpg"},{id:2,name:"Galaxy",price:35999,image:"http://intocode.ru/d/react-project-1/images/2.jpg"},{id:3,name:"\u0421\u043a\u0443\u0442\u0435\u0440",price:65500,image:"http://intocode.ru/d/react-project-1/images/3.jpg"},{id:4,name:"\u041c\u043e\u043d\u0438\u0442\u043e\u0440 Samsung",price:12e3,image:"http://intocode.ru/d/react-project-1/images/4.jpg"},{id:5,name:"\u0420\u0435\u0441\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u043c\u0430\u0441\u043a\u0430",price:500,image:"http://intocode.ru/d/react-project-1/images/5.jpg"},{id:6,name:"\u0421\u0442\u0438\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u043c\u0430\u0448\u0438\u043d\u0430",price:1e5,image:"http://intocode.ru/d/react-project-1/images/6.jpg"},{id:7,name:"\u0411\u0435\u043b\u044b\u0439 \u0445\u043e\u043b\u043e\u0434\u0438\u043b\u044c\u043d\u0438\u043a",price:43100,image:"http://intocode.ru/d/react-project-1/images/7.jpg"},{id:8,name:"\u041a\u043e\u043b\u043e\u043d\u043a\u0430",price:3e3,image:"http://intocode.ru/d/react-project-1/images/8.jpg"},{id:9,name:"\u041d\u0430\u0443\u0448\u043d\u0438\u043a\u0438",price:1500,image:"http://intocode.ru/d/react-project-1/images/9.jpg"}];var p=function(e){var t=e.isProductInBasket,c=e.handleClick;return Object(n.jsx)("button",{className:"button addition-button",onClick:c,disabled:t,children:t?"\u0422\u043e\u0432\u0430\u0440 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})};var m=function(e){var t=e.handleClick;return Object(n.jsx)("button",{className:"button deletion-button",onClick:t,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u043a\u043e\u0440\u0437\u0438\u043d\u044b"})};var h=function(e){var t=e.item,c=Object(u.b)(),a=Object(d.f)(),r=Object(u.c)((function(e){return e.basket})),i="/basket"===a.location.pathname,s=r.find((function(e){return t.id===e.id}));return Object(n.jsxs)("div",{className:"product",children:[Object(n.jsx)("div",{className:"product-image",children:Object(n.jsx)("img",{src:t.image,alt:"product"})}),Object(n.jsxs)("div",{className:"product-info",children:[Object(n.jsx)("div",{className:"product-name",children:t.name}),Object(n.jsxs)("div",{className:"product-price",children:[t.price," \u20bd"]}),i?Object(n.jsx)(m,{handleClick:function(){return c({type:"delete",payload:t.id})}}):Object(n.jsx)(p,{handleClick:function(){return c({type:"add",payload:t.id})},isProductInBasket:s})]})]})};var O=function(){var e=Object(u.c)((function(e){return e.products}));return e?e.map((function(e){return Object(n.jsx)(h,{item:e},e.id)})):"loadig"};var f=function(){var e=Object(u.c)((function(e){return e.basket}));return 0===e.length?Object(n.jsx)("div",{className:"empty-basket",children:"\u0412 \u0432\u0430\u0448\u0435\u0439 \u043a\u043e\u0440\u0437\u0438\u043d\u0435 \u043f\u043e\u043a\u0430 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442"}):e.map((function(e){return Object(n.jsx)(h,{item:e},e.id)}))};var g=function(){return Object(n.jsx)("main",{className:"main",children:Object(n.jsxs)(d.c,{children:[Object(n.jsx)(d.a,{exact:!0,path:"/",children:Object(n.jsx)(O,{})}),Object(n.jsx)(d.a,{path:"/basket",children:Object(n.jsx)(f,{})})]})})};var v=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.basket}));return console.log(t),Object(a.useEffect)((function(){var e=setInterval((function(){!function(e){fetch("http://localhost:3000",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({basket:e})}).then((function(e){return e.json()})).then((function(e){200===e.status?console.log("basket information sent successful"):console.log("basket information sending failed")})).catch((function(e){return console.error(e)}))}(t)}),5e3);return function(){return clearInterval(e)}}),[t]),Object(a.useEffect)((function(){return e({type:"load",payload:l})}),[e]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(b,{}),Object(n.jsx)(g,{})]})},k=c(10),x=c(15),y=c(23),N=c(9);var S={basket:JSON.parse(localStorage.getItem("basket"))||[]},C=Object(x.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"load":return Object(N.a)(Object(N.a)({},e),{},{products:t.payload});case"add":return Object(N.a)(Object(N.a)({},e),{},{basket:[].concat(Object(y.a)(e.basket),[e.products.find((function(e){return e.id===t.payload}))])});case"delete":return Object(N.a)(Object(N.a)({},e),{},{basket:e.basket.filter((function(e){return e.id!==t.payload}))});default:return e}}),S);C.subscribe((function(){var e=C.getState();e.hasOwnProperty("basket")&&localStorage.setItem("basket",JSON.stringify(e.basket))})),s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(u.a,{store:C,children:Object(n.jsx)(k.a,{basename:"/axeta-test2",children:Object(n.jsx)(v,{})})})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.8b2feaeb.chunk.js.map